import{r as u,R as t,c as L,P as n,_ as fn,a as R}from"./index-Ds2fimAw.js";import{b as w}from"./index.esm-nQ9cFckz.js";import{C as Ke}from"./CFormControlWrapper-c1Z5zr1d.js";import{Y as Ue,a5 as dn,a7 as mn,a6 as vn}from"./ProBadge-ySue6FWx.js";var _=u.forwardRef(function(e,i){var o=e.children,l=e.className,c=e.container,s=c===void 0?"dropdown":c,m=e.disabled,p=e.dropdownClassNames,g=e.footer,v=e.footerContent,a=e.onHide,b=e.onShow,h=e.portal,U=h===void 0?!0:h,F=e.toggler,D=e.visible,E=u.useRef(null),q=Ue(i,E),T=u.useRef(null),P=u.useRef(null),W=dn(),j=W.initPopper,ee=W.destroyPopper,G=u.useState(D),O=G[0],H=G[1],C={placement:mn(E.current)?"bottom-end":"bottom-start",modifiers:[{name:"preventOverflow",options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,2]}}]};u.useEffect(function(){H(D)},[D]),u.useEffect(function(){return s!=="inline"&&O&&(b&&b(),window.addEventListener("mouseup",J),window.addEventListener("keyup",Y),P.current&&T.current&&j(P.current,T.current,C)),function(){a&&a(),window.removeEventListener("mouseup",J),window.removeEventListener("keyup",Y),ee()}},[O]);var Y=function(V){V.key==="Escape"&&H(!1)},J=function(V){E.current&&E.current.contains(V.target)||T.current&&T.current.contains(V.target)||H(!1)};switch(s){case"inline":return t.createElement("div",{className:L("picker",l),ref:q},o);default:return t.createElement("div",{className:L(l,{show:O}),onClick:function(){return!m&&H(!0)},ref:q},F&&t.isValidElement(F)&&t.cloneElement(F,{ref:P}),t.createElement(vn,{portal:U},t.createElement("div",{className:L(p,{show:U&&O}),ref:T},o,g&&v)))}});_.displayName="CPicker";_.propTypes={children:n.node,className:n.string,container:n.oneOf(["dropdown","inline"]),disabled:n.bool,dropdownClassNames:n.string,footer:n.bool,footerContent:n.node,onHide:n.func,onShow:n.func,portal:n.bool,toggler:n.node,visible:n.bool};var pn=function(e){var i=u.useState(!1),o=i[0],l=i[1];return u.useEffect(function(){var c=new IntersectionObserver(function(s){var m=s[0];return l(m.isIntersecting)});return e.current&&c.observe(e.current),function(){return c.disconnect()}},[]),o},M=u.forwardRef(function(e,i){var o=e.elements,l=e.onClick,c=e.selected,s=u.useRef(!0),m=u.useRef(null),p=Ue(i,m),g=pn(m);u.useEffect(function(){var a,b,h=(a=m.current)===null||a===void 0?void 0:a.querySelector(".selected");g&&h&&h instanceof HTMLElement&&((b=m.current)===null||b===void 0||b.scrollTo({top:h.offsetTop,behavior:s.current?"auto":"smooth"})),g&&(s.current=!1)},[g,c]);var v=function(a,b){(a.code==="Space"||a.key==="Enter")&&(a.preventDefault(),l&&l(b))};return t.createElement("div",{className:"time-picker-roll-col",ref:p},o.map(function(a,b){return t.createElement("div",{className:L("time-picker-roll-cell",{selected:a.value===c}),key:b,onClick:function(){return l&&l(a.value)},onKeyDown:function(h){return v(h,a.value)},role:"button",tabIndex:0},a.label)}))});M.propTypes={elements:n.array.isRequired,onClick:n.func,selected:n.oneOfType([n.number,n.string])};M.displayName="CTimePickerRollCol";var gn=function(e,i){return e==="am"&&i===12?0:e==="am"?i:e==="pm"&&i===12?12:i+12},bn=function(e){return e%12||12},ue=function(e){return e?e instanceof Date?e:new Date("1970-01-01 ".concat(e)):null},Le=function(e,i){return e.toLocaleTimeString(i).includes("AM")?"am":e.toLocaleTimeString(i).includes("PM")||e.getHours()>=12?"pm":"am"},ce=function(e,i,o){var l=new Date,c=hn(i),s=new Intl.DateTimeFormat(i,{hour:c?"2-digit":"numeric",minute:"2-digit",second:"2-digit"});return e.map(function(m){var p;return o==="hour"&&l.setHours(m),o==="minute"&&l.setMinutes(m),o==="second"&&l.setSeconds(m),{value:m,label:((p=s.formatToParts(l).find(function(g){return g.type===o}))===null||p===void 0?void 0:p.value)||""}})},yn=function(e,i,o,l,c){i===void 0&&(i="auto"),o===void 0&&(o=[]),l===void 0&&(l=[]),c===void 0&&(c=[]);var s=i==="auto"&&We(e)||i===!0,m=Array.isArray(o)&&o.length>0?o:typeof o=="function"?Array.from({length:s?12:24},function(v,a){return s?a+1:a}).filter(function(v){return o(v)}):Array.from({length:s?12:24},function(v,a){return s?a+1:a}),p=Array.isArray(l)&&l.length>0?l:typeof l=="function"?Array.from({length:60},function(v,a){return a}).filter(function(v){return l(v)}):Array.from({length:60},function(v,a){return a}),g=Array.isArray(c)&&c.length>0?c:typeof c=="function"?Array.from({length:60},function(v,a){return a}).filter(function(v){return c(v)}):Array.from({length:60},function(v,a){return a});return{listOfHours:ce(m,e,"hour"),listOfMinutes:ce(p,e,"minute"),listOfSeconds:ce(g,e,"second"),hour12:s}},Fe=function(e,i,o){return o===void 0&&(o="auto"),e?o==="auto"&&We(i)||o===!0?bn(e.getHours()):e.getHours():""},qe=function(e){return e?e.getMinutes():""},xe=function(e){return e?e.getSeconds():""},We=function(e){return["am","AM","pm","PM"].some(function(i){return new Date().toLocaleString(e).includes(i)})},kn=function(e){var i=new Date("1970-01-01T".concat(e));return i instanceof Date&&!Number.isNaN(i.getTime())},hn=function(e){var i=new Date(2020,0,1,7,5,7),o=i.toLocaleTimeString(e);return o.startsWith("0")},Cn=function(e,i){var o=u.useRef();return u.useCallback(function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var s=function(){clearTimeout(o.current),e.apply(void 0,l)};clearTimeout(o.current),o.current=setTimeout(s,i)},[e,i])},se,fe,de,me,ve,pe,je=u.forwardRef(function(e,i){var o,l,c=e.ampm,s=c===void 0?"auto":c,m=e.cancelButton,p=m===void 0?"Cancel":m,g=e.cancelButtonColor,v=g===void 0?"primary":g,a=e.cancelButtonSize,b=a===void 0?"sm":a,h=e.cancelButtonVariant,U=h===void 0?"ghost":h,F=e.className,D=e.cleaner,E=D===void 0?!0:D,q=e.confirmButton,T=q===void 0?"OK":q,P=e.confirmButtonColor,W=P===void 0?"primary":P,j=e.confirmButtonSize,ee=j===void 0?"sm":j,G=e.confirmButtonVariant,O=e.container,H=O===void 0?"dropdown":O,C=e.disabled,Y=e.feedback,J=e.feedbackInvalid,V=e.feedbackValid,ge=e.footer,Ge=ge===void 0?!0:ge,Ye=e.hours,be=e.id,ye=e.indicator,ne=ye===void 0?!0:ye,ke=e.inputOnChangeDelay,Je=ke===void 0?750:ke,Qe=e.inputReadOnly,te=e.invalid,Xe=e.label,he=e.locale,z=he===void 0?"default":he,Ce=e.minutes,Q=Ce===void 0?!0:Ce,Ze=e.name,A=e.onTimeChange,re=e.onHide,oe=e.onShow,Ee=e.placeholder,$e=Ee===void 0?"Select time":Ee,Te=e.portal,_e=Te===void 0?!1:Te,en=e.required,Se=e.seconds,X=Se===void 0?!0:Se,we=e.size,nn=e.text,Z=e.time,tn=e.tooltipFeedback,N=e.valid,Oe=e.variant,Ne=Oe===void 0?"roll":Oe,rn=e.visible,Be=fn(e,["ampm","cancelButton","cancelButtonColor","cancelButtonSize","cancelButtonVariant","className","cleaner","confirmButton","confirmButtonColor","confirmButtonSize","confirmButtonVariant","container","disabled","feedback","feedbackInvalid","feedbackValid","footer","hours","id","indicator","inputOnChangeDelay","inputReadOnly","invalid","label","locale","minutes","name","onTimeChange","onHide","onShow","placeholder","portal","required","seconds","size","text","time","tooltipFeedback","valid","variant","visible"]),x=u.useRef(null),B=u.useRef(null),Re=u.useState(ue(Z)),d=Re[0],K=Re[1],De=u.useState(null),Pe=De[0],on=De[1],He=u.useState(N??(te===!0?!1:void 0)),$=He[0],ie=He[1],Ve=u.useState(d?Le(new Date(d),z):"am"),ae=Ve[0],an=Ve[1],ze=u.useState(rn),le=ze[0],I=ze[1],Ae=u.useState({listOfHours:[],listOfMinutes:[],listOfSeconds:[],hour12:!1}),f=Ae[0],ln=Ae[1];u.useEffect(function(){K(Z?ue(Z):null)},[Z]),u.useEffect(function(){ie(N??(te===!0?!1:void 0))},[N,te]),u.useEffect(function(){ln(yn(z,s,Ye,Q,X)),B.current&&(B.current.value=d?d.toLocaleTimeString(z,R(R({hour12:f&&f.hour12,hour:"numeric"},Q&&{minute:"numeric"}),X&&{second:"numeric"})):""),d&&an(Le(new Date(d),z))},[d]),u.useEffect(function(){B.current&&B.current.form&&(x.current=B.current.form)},[B]),u.useEffect(function(){x.current&&(x.current.addEventListener("submit",function(r){setTimeout(function(){return Me(r.target)})}),Me(x.current))},[x,d]);var Ie=function(r){r.stopPropagation(),K(null),A==null||A(null)},Me=function(r){if(r.classList.contains("was-validated")){if(d)return ie(!0);ie(!1)}},un=Cn(function(r){return kn(r)&&K(ue(r))},Je),S=function(r,y){var k=d||new Date("1970-01-01");r==="toggle"&&(y==="am"&&k.setHours(k.getHours()-12),y==="pm"&&k.setHours(k.getHours()+12)),r==="hours"&&(f&&f.hour12?k.setHours(gn(ae,Number.parseInt(y))):k.setHours(Number.parseInt(y))),r==="minutes"&&k.setMinutes(Number.parseInt(y)),r==="seconds"&&k.setSeconds(Number.parseInt(y)),K(new Date(k)),A==null||A(k.toTimeString(),k.toLocaleTimeString(),k)},cn=function(){return t.createElement("div",{className:"time-picker-input-group"},t.createElement("input",{autoComplete:"off",className:"time-picker-input",disabled:C,id:be,name:Ze,onChange:function(r){return un(r.target.value)},placeholder:$e,readOnly:Qe,required:en,ref:B}),ne&&(typeof ne=="boolean"?t.createElement("div",R({className:"time-picker-indicator"},C!==!1&&{onClick:function(){return I(!le)},onKeyDown:function(r){r.key==="Enter"&&I(!le)},tabIndex:0})):ne),E&&d&&(typeof E=="boolean"?t.createElement("div",{className:"time-picker-cleaner",onClick:function(r){return Ie(r)}}):t.isValidElement(E)&&t.cloneElement(E,{onClick:function(r){return Ie(r)}})))},sn=function(){return t.createElement(t.Fragment,null,t.createElement("span",{className:"time-picker-inline-icon"}),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("hours",r.target.value)},value:Fe(d,z)},f&&f.listOfHours.map(function(r,y){return t.createElement("option",{value:r.value.toString(),key:y},r.label)})),Q&&t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,":"),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("minutes",r.target.value)},value:qe(d)},f&&f.listOfMinutes.map(function(r,y){return t.createElement("option",{value:r.value.toString(),key:y},r.label)}))),X&&t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,":"),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("seconds",r.target.value)},value:xe(d)},f&&f.listOfSeconds.map(function(r,y){return t.createElement("option",{value:r.value.toString(),key:y},r.label)}))),f&&f.hour12&&t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("toggle",r.target.value)},value:ae},t.createElement("option",{value:"am"},"AM"),t.createElement("option",{value:"pm"},"PM")))};return t.createElement(Ke,{describedby:Be["aria-describedby"],feedback:Y,feedbackInvalid:J,feedbackValid:V,id:be,invalid:$===!1,label:Xe,text:nn,tooltipFeedback:tn,valid:$},t.createElement(_,R({className:L("time-picker",(o={},o["time-picker-".concat(we)]=we,o.disabled=C,o["is-invalid"]=$===!1,o["is-valid"]=$,o),F),container:H,disabled:C,dropdownClassNames:"time-picker-dropdown",footer:Ge,footerContent:t.createElement("div",{className:"time-picker-footer"},p&&t.createElement(w,{color:v,size:b,variant:U,onClick:function(){Pe&&K(new Date(Pe)),I(!1)}},p),T&&t.createElement(w,{color:W,size:ee,variant:G,onClick:function(){I(!1)}},T)),onHide:function(){I(!1),re==null||re()},onShow:function(){d&&on(new Date(d)),I(!0),oe==null||oe()},portal:_e,toggler:cn(),visible:le},Be,{ref:i}),t.createElement("div",{className:L("time-picker-body",(l={},l["time-picker-roll"]=Ne==="roll",l))},Ne==="select"?t.createElement(sn,null):t.createElement(t.Fragment,null,t.createElement(M,{elements:f&&f.listOfHours,onClick:function(r){return S("hours",r.toString())},selected:Fe(d,z,s)}),Q&&t.createElement(M,{elements:f&&f.listOfMinutes,onClick:function(r){return S("minutes",r.toString())},selected:qe(d)}),X&&t.createElement(M,{elements:f&&f.listOfSeconds,onClick:function(r){return S("seconds",r.toString())},selected:xe(d)}),f&&f.hour12&&t.createElement(M,{elements:[{value:"am",label:"AM"},{value:"pm",label:"PM"}],onClick:function(r){return S("toggle",r)},selected:ae})))))});je.propTypes=R(R(R({},Ke.propTypes),_.propTypes),{ampm:n.oneOfType([n.oneOf(["auto"]),n.bool]),cancelButton:n.oneOfType([n.bool,n.node]),cancelButtonColor:(se=w.propTypes)===null||se===void 0?void 0:se.color,cancelButtonSize:(fe=w.propTypes)===null||fe===void 0?void 0:fe.size,cancelButtonVariant:(de=w.propTypes)===null||de===void 0?void 0:de.variant,className:n.string,confirmButton:n.oneOfType([n.bool,n.node]),confirmButtonColor:(me=w.propTypes)===null||me===void 0?void 0:me.color,confirmButtonSize:(ve=w.propTypes)===null||ve===void 0?void 0:ve.size,confirmButtonVariant:(pe=w.propTypes)===null||pe===void 0?void 0:pe.variant,hours:n.oneOfType([n.arrayOf(n.number.isRequired),n.func]),id:n.string,inputOnChangeDelay:n.number,locale:n.string,minutes:n.oneOfType([n.bool,n.arrayOf(n.number.isRequired),n.func]),name:n.string,onTimeChange:n.func,required:n.bool,seconds:n.oneOfType([n.bool,n.arrayOf(n.number.isRequired),n.func]),time:n.oneOfType([n.instanceOf(Date),n.string]),variant:n.oneOf(["roll","select"])});je.displayName="CTimePicker";export{_ as C,je as a,Cn as u};
